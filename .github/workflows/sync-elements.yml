name: Sync Elements

on:
  workflow_dispatch:
    inputs:
      exportPath:
        description: "Path to the exported flows JSON in the repo"
        required: false
        default: "exports/latest-export.json"
      commitSha:
        description: "Commit SHA created by the extension (optional)"
        required: false
      ref:
        description: "Branch/tag/SHA to checkout (optional)"
        required: false

jobs:
  sync-elements:
    runs-on: ubuntu-latest

    # If later you want this workflow to commit changes back, keep contents: write.
    permissions:
      contents: write

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          ref: ${{ inputs.ref || github.ref_name }}
          fetch-depth: 0

      - name: Log inputs (debug)
        run: |
          echo "exportPath=${{ inputs.exportPath }}"
          echo "commitSha=${{ inputs.commitSha }}"
          echo "ref=${{ inputs.ref }}"
          echo "github.ref=${{ github.ref }}"

      - name: Check if export file exists
        run: |
          if [ -f "${{ inputs.exportPath }}" ]; then
            echo "✅ Found export file at '${{ inputs.exportPath }}'"
          else
            echo "⚠️ Export file not found at '${{ inputs.exportPath }}' (workflow still OK as placeholder)."
          fi

      - name: Placeholder
        run: echo "✅ sync-elements workflow exists and completed."
